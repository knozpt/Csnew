<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Spam CS2</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .map-btn { margin: 5px; padding: 10px; cursor: pointer; background: #444; color: white; border-radius: 5px; }
    .tab { margin: 10px; cursor: pointer; display: inline-block; }
    .item-card { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
    img { max-width: 100%; height: auto; }
  </style>
</head>
<body>

<div id="main"></div>

<script>
fetch('data.json') // -> JSON com mapas/itens
  .then(res => res.json())
  .then(data => {
    const main = document.getElementById('main');

    // Página Inicial
    function showHome() {
      main.innerHTML = '<h1>Spam CS2</h1>';
      Object.keys(data.maps).forEach(mapName => {
        const btn = document.createElement('div');
        btn.textContent = mapName.charAt(0).toUpperCase() + mapName.slice(1);
        btn.className = 'map-btn';
        btn.onclick = () => showMap(mapName);
        main.appendChild(btn);
      });
    }

    // Página de cada mapa
    function showMap(map) {
      main.innerHTML = `<h2>${map.charAt(0).toUpperCase() + map.slice(1)}</h2>`;
      const tabs = ['smokes','flash','molotov'];

      tabs.forEach(type => {
        const tab = document.createElement('span');
        tab.textContent = type.charAt(0).toUpperCase() + type.slice(1);
        tab.className = 'tab';
        tab.onclick = () => showItems(map, type);
        main.appendChild(tab);
      });

      const back = document.createElement('div');
      back.textContent = '← Voltar';
      back.style.color = 'blue';
      back.style.cursor = 'pointer';
      back.onclick = showHome;
      main.appendChild(back);
      
      // start with smokes
      showItems(map, 'smokes');
    }

    // Mostra itens do tipo
    function showItems(map, type) {
      const section = document.createElement('div');
      section.innerHTML = '';
      const items = data.maps[map][type];

      items.forEach(obj => {
        const card = document.createElement('div');
        card.className = 'item-card';
        card.innerHTML = `
          <h3>${obj.name}</h3>
          <p>${obj.description}</p>
          <img src="${obj.image}" alt="${obj.name}">
        `;
        section.appendChild(card);
      });

      const existing = document.querySelector('.items-section');
      if (existing) existing.remove();

      section.className = 'items-section';
      main.appendChild(section);
    }

    showHome();
  })
  .catch(err => {
    console.error(err);
    document.getElementById('main').textContent = 'Erro a carregar dados.';
  });
</script>

</body>
</html>
